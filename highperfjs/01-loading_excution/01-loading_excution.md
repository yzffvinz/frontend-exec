## 浏览器是单进程的吗？

浏览器是多进程的，每个tab页是单进程的（例外：多个空白页会合成一个线程）

### 每个进程里面分什么线程、职责是什么？

#### GUI渲染线程

负责渲染页面，解析 HTML，CSS 构成 DOM 树等，当页面重绘或者由于某种操作引起回流都会调起该线程。
和 JS 引擎线程是互斥的，当 JS 引擎线程在工作的时候，GUI 渲染线程会被挂起，GUI 更新被放入在 JS 任务队列中，等待 JS 引擎线程空闲的时候继续执行。

#### JS引擎线程

单线程工作，负责解析运行 JavaScript 脚本。
和 GUI 渲染线程互斥，JS 运行耗时过长就会导致页面阻塞

#### 事件触发线程

当事件符合触发条件被触发时，该线程会把对应的事件回调函数添加到任务队列的队尾，等待 JS 引擎处理。

#### 定时器触发线程

浏览器定时计数器并不是由 JS 引擎计数的，阻塞会导致计时不准确。
开启定时器触发线程来计时并触发计时，计时完成后会被添加到任务队列中，等待 JS 引擎处理。

#### http请求线程

http 请求的时候会开启一条请求线程。
请求完成有结果了之后，将请求的回调函数添加到任务队列中，等待 JS 引擎处理。

## 加载和执行

#### 建议一：将 script 标签防止在 body 之后

浏览器在遇到<script>时，会让页面等待脚本的下载与串行执行（在比较新的的浏览器是并行下载js脚本，老旧浏览器是并行下载执行）。如果将<script>放在文档<head>中，页面将会白屏，等待js执行完成，才渲染页面。将script放置在body之后，这时候页面主体已经展示给用户。

#### 建议二： 减少JavaScript脚本个数



#### 建议三：无阻塞加载脚本

